## Назначение и принцип работы компонента

Компонент предназначен для ведения учёта остатка товара по его одному свойству, указанному в настройках компонента.

При редактирование товара вам необходимо выставить количество оставшихся товаров по каждому значению свойства, выбранного в настройках компонента.

После того, как статус заказа будет равен тому статусу, что указан в настройках компонента, количество оставшихся товаров, заказанных клиентом, будет автоматически уменьшено на то количество, что было в корзине клиента.

## Настройки компонента

Для редактирования настроек компонента перейдите в раздел "Настройки системы" и выберите фильтр "msproductremains"

[![](https://file.modx.pro/files/a/1/2/a129f972f91fa842cd924084d0e1cf48s.jpg)](https://file.modx.pro/files/a/1/2/a129f972f91fa842cd924084d0e1cf48.png)

Для данного компонента доступны следующие настройки:
* включить / выключить учёт остатков товаров.
* назначить файл c Javascript для изменения количества оставшихся товаров на фронте сайта.
* назначить число оставшихся товаров, используемое для форматирования вывода количества оставшихся товаров.
* назначить свойство товара, на основании которого будут формироваться остатки.
* назначить статус заказа, при установке которого происходит учёт оставшихся товаров.
* выбрать выводить число в качестве остатка или текст.

## Вкладка учёта остатков товара

После активации компонента в ресурсе товара miniShop2 появится новая вкладка "Остатки", где вы можете вводить количество оставшихся товаров по каждому значению выбранного свойства.

[![](https://file.modx.pro/files/c/9/7/c97dd12ae93c083eb727216077ef18c7s.jpg)](https://file.modx.pro/files/c/9/7/c97dd12ae93c083eb727216077ef18c7.png)

Предварительно необходимо добавить значения в выбранное свойство товара (по умолчанию, размер), сохранить товар и перезагрузить страницу.

[![](https://file.modx.pro/files/c/5/b/c5bc8a3bedf975f6e386bb68d9b4d763s.jpg)](https://file.modx.pro/files/c/5/b/c5bc8a3bedf975f6e386bb68d9b4d763.png)

## Вывод количества оставшихся товаров
Для вывода количества оставшихся товаров на сайте в любое место сайта необходимо добавить тег с классом `remains_change`.

### Пример вывода с включённым параметром "Возвращать число"
```
<div class="remains">Товара в наличии: <span class="remains_change"></span> шт.</div>
```
После загрузки страницы автоматически в тег `<span class="remains_change">` будет добавлено количество оставшихся товаров для выбранного свойства или для значения по умолчанию.

### Пример вывода с выключенным параметром "Возвращать число"
```
<div class="remains_change">[[%msproductremains_text_more]]</div>
```
После загрузки страницы автоматически текст внутри тега `<div class="remains_change">` будет изменён на текст, соответствующий условию выборки и количеству оставшихся товаров.